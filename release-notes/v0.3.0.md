# Release Notes - v0.3.0

**Release Date:** February 20, 2026

## ðŸŽ‰ New Features

### Webhook Support

Added webhook functionality to enable real-time event notifications:

- **Webhook Registration & Management** - Configure webhooks for your client application
  - Register webhook endpoints to receive event notifications
  - Support for multiple webhook listeners per client
  - Secure webhook delivery with authentication
- **Event-Driven Architecture** - Subscribe to system events as they occur
  - User authentication events
  - Session updates
  - User management operations
  - Configurable event filtering and routing

### Version Endpoint Enhancement

Added enhanced `/version` endpoint for WebUI version monitoring:

- **GET** `/version` - Returns current OpenAuthster issuer version
  - Enables WebUI to continuously monitor for new versions on the server
  - Supports automated version checking and update notifications
  - Includes comprehensive CORS policy for cross-origin requests
  - Returns version information in JSON format for easy client-side parsing

## ðŸ”§ Major Improvements

### CORS Policy Implementation

- Implemented comprehensive CORS (Cross-Origin Resource Sharing) policy
- Enhanced security for cross-origin requests from WebUI applications
- Enables seamless communication between frontend and backend services

## ðŸ§ª Test Suite

Added a comprehensive test suite for the CLI commands using Bun's test runner.

### CLI Init Flow (`tests/init-flow.test.ts`)

Unit tests for the `initialize` command covering:

- **Wrangler method happy path** â€” exact exec command sequence, `wrangler.json` content, success logs, no git contamination
- **Git method happy path** â€” full command sequence including git setup, D1 provisioning, and initial push
- **Binary checks** â€” missing `wrangler` or `git` binaries produce the correct error and `exit(1)`
- **Repository URL validation** â€” missing `--repo` on the git method exits early with an informative error
- **Exec error handling** â€” each individual command failure produces the correct error message and stops execution
- **Jurisdiction / location forwarding** â€” parameterized tests confirming all option combinations are passed to `wrangler d1 create`
- **Integration tests** â€” clones the real repository into a temp directory and runs `initializeFlow` with real filesystem I/O (mocked external commands) to verify `wrangler.json` is written correctly from the actual `wrangler.example.jsonc`

### CLI Upgrade Flow (`tests/upgrade-flow.test.ts`)

Unit tests for the `upgrade` command covering:

- **deploy: none** â€” correct exec sequence, manual deploy hint logged, no deploy commands run
- **deploy: wrangler** â€” `wrangler deploy` is invoked after pull + migration, git push is not
- **deploy: git** â€” `git push` is invoked after pull + migration, wrangler deploy is not
- **Version forwarding** â€” parameterized tests ensuring the version string reaches `git pull` correctly
- **Binary checks** â€” missing `git` binary produces the correct error and `exit(1)` without running any commands
- **Exec error handling** â€” failures on `git pull`, `wrangler d1 apply`, `wrangler deploy`, and `git push` each exit with code 1, emit the correct error message, and halt further execution

### Testable Architecture

The CLI logic for both `initialize` and `upgrade` commands has been extracted into standalone, dependency-injected functions (`bin/initFlow.ts`, `bin/upgradeFlow.ts`), enabling full unit testing without spawning real processes or requiring Cloudflare credentials.
